<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/text.css" />
    <link rel="stylesheet" href="css/hidden.css" />
    <link rel="stylesheet" href="css/card.css" />
    <link rel="stylesheet" href="css/split.css" />
    <link rel="stylesheet" href="css/mail.css" />
    <title>å¯¶å¯¶ï¼Œæ„›å¦³å–²</title>
    <link rel="icon" type="image/png" href="img/heart.png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      @font-face {
        font-family: "CoolRegularScript";
        src: url("../font/font1.ttf") format("truetype");
      }
    </style>
  </head>
  <body>
    <a href="../page.html" class="home-fixed">
      <img src="../img/home.png" alt="Home" class="home-icon" />
    </a>
    <div class="content">
      <div class="aurora-box">
        <h1 class="aurora">
          <span class="time" id="time"></span>
        </h1>
      </div>
    </div>

    <div class="countdown">
      <h2 id="titleDisplay">å€’æ•¸è¨ˆæ™‚åç¨± â³âœ¨</h2>
      <div class="timeRow">
        <h2 id="countdownText" style="margin-top: 10px">--:--:--</h2>

        <button
          id="toggleBtn"
          style="
            width: 80px;
            height: 80px;
            border: none;
            border-radius: 8px;
            background: url('../img/count.png') no-repeat center/contain;
            cursor: pointer;
          "
        ></button>
      </div>

      <!-- à¸ªà¹ˆà¸§à¸™à¸™à¸µà¹‰à¸ˆà¸°à¸–à¸¹à¸à¸‹à¹ˆà¸­à¸™ -->
      <div
        id="configBox"
        style="
          margin-top: 15px;
          padding: 15px;
          border: 1px solid #ccc;
          border-radius: 12px;
          background: #fff;
          display: none;
          transition: 0.3s;
        "
      >
        <input
          type="text"
          id="titleInput"
          placeholder="å€’æ•¸è¨ˆæ™‚åç¨±..."
          style="
            padding: 8px;
            border-radius: 8px;
            border: 1px solid #ccc;
            width: 250px;
            margin-bottom: 10px;
            display: block;
          "
        />

        <input
          type="date"
          id="datePicker"
          style="
            padding: 8px;
            border-radius: 8px;
            border: 1px solid #ccc;
            display: block;
            margin-bottom: 10px;
          "
        />

        <button
          id="setBtn"
          style="
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            background: #eb8abb;
            color: white;
            cursor: pointer;
          "
        >
          å„²å­˜ ğŸ’¾
        </button>
        <button
          id="resetBtn"
          style="
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            background: #ff6b6b;
            color: white;
            cursor: pointer;
          "
        >
          é‡è¨­ ğŸ”„
        </button>
      </div>
    </div>

    <div class="container">
      <h1>å¯¶å¯¶ æ„›ä½ å–² ğŸ’—</h1>
    </div>

    <div class="question-container container">
      <video
        class="local-gif"
        src="img/chiikawa-hmm.mp4"
        autoplay
        muted
        loop
      ></video>
      <h2 class="question">å¯¶å¯¶æ„›æˆ‘å—ï¼Ÿ</h2>
      <div class="button-container">
        <button class="yes-btn btn js-yes-btn">Yes</button>
        <button class="no-btn btn js-no-btn">No</button>
      </div>
    </div>

    <div class="result-container container">
      <video
        class="gif-result"
        src="img/chiikawa-usagi.mp4"
        autoplay
        loop
      ></video>
      <h2>å˜¿å˜¿ æˆ‘çŸ¥é“å‘€ ğŸ˜</h2>
      <!-- text.css -->
      <h1>
        æˆ‘ä¹Ÿæ˜¯å•Š å¯¶å¯¶...æˆ‘
        <span class="dropping-texts">
          <div>çœŸçš„</div>
          <div>çœŸçš„çœŸçš„</div>
          <div>çœŸçš„çœŸçš„çœŸçš„</div>
          <div>çœŸçš„çœŸçš„çœŸçš„çœŸçš„</div>
          <div>çœŸçš„çœŸçš„çœŸçš„çœŸçš„çœŸçš„</div>
          <div>æ„›ä½ å–²</div>
        </span>
      </h1>
    </div>

    <div class="result-container2 container">
      <video class="gif-result" src="img/chiikawa-ya.mp4" autoplay loop></video>
      <section>
        <p>æˆ‘æœ‰å€‹å°ç§˜å¯†è¦å·å·å‘Šè¨´ä½ å–”~</p>
        <ul class="code">
          <li tabindex="0" class="digit">
            <span>æˆ‘</span>
          </li>
          <li tabindex="0" class="digit">
            <span>æ‰“ç®—</span>
          </li>
          <li tabindex="0" class="digit">
            <span>ä¸€ç›´</span>
          </li>
          <li tabindex="0" class="digit">
            <span>æ„›</span>
          </li>
          <li tabindex="0" class="digit">
            <span>ä½ </span>
          </li>
          <li tabindex="0" class="digit">
            <span>åˆ°</span>
          </li>
          <li tabindex="0" class="digit">
            <span>æ°¸é </span>
          </li>
          <li tabindex="0" class="digit">
            <span>å‘€.</span>
          </li>
        </ul>
      </section>
    </div>

    <div class="result-container3 container">
      <!-- card.css -->
      <div class="wrap animate pop">
        <div class="overlay">
          <div class="overlay-content animate slide-left delay-2">
            <h1 class="animate slide-left pop delay-4">è¦ªæ„›çš„æ¥Šæ³“æ¯…~</h1>
            <p
              class="animate slide-left pop delay-5"
              style="color: white; margin-bottom: 2.5rem"
            >
              æ„›ä½ å–²,<em>æˆ‘çš„å¯¶è²</em>
            </p>
          </div>
          <div class="image-content animate slide delay-5"></div>
          <div class="dots animate">
            <div class="dot animate slide-up delay-6"></div>
            <div class="dot animate slide-up delay-7"></div>
            <div class="dot animate slide-up delay-8"></div>
          </div>
        </div>
        <div class="text">
          <p>
            <img class="inset" src="img/chiikawa-love.png" alt="" /><em
              >å¯¶å¯¶ï½æˆ‘æ„›ä½ å–”ï¼</em
            >æˆ‘ä»¥å‰èªªéç‚ºä»€éº¼æ„›ä½ , ä½†æˆ‘æƒ³å†èªªä¸€æ¬¡, å› ç‚ºä½ ç¸½æ˜¯å–œæ­¡å•æˆ‘.
            æˆ‘ä¹‹æ‰€ä»¥æ„›ä½ , æ˜¯å› ç‚ºæœ‰ä½ åœ¨èº«é‚Šè®“æˆ‘å¥½å¹¸ç¦. ä½ æ—¢å¯æ„›åˆé«”è²¼,
            æˆ‘å’Œä½ åœ¨ä¸€èµ·çš„æ¯ä¸€åˆ»éƒ½è¶…é–‹å¿ƒçš„ï½å¦‚æœæœ‰æ™‚å€™ä½ æ’’å¬Œæˆ–è€…åƒå°å­©å­ä¸€æ¨£ä»»æ€§ä¹Ÿæ²’é—œä¿‚å•¦.
            æˆ‘å‘Šè¨´éä½ ,æˆ‘ä¸æ˜¯ä¸å–œæ­¡å°å­©, åªæ˜¯ä¸å–œæ­¡æ²’æœ‰é“ç†çš„ä»»æ€§è€Œå·²ï½.
          </p>
          <p>
            æˆ‘ä¹‹å‰èªªé, ç¸½æœ‰ä¸€å¤©æœƒæœ‰äººæ”¹è®Š, ä½†é‚£ä¸¦ä¸æ˜¯èªªæˆ‘ä»¥å¾Œå°±ä¸æ„›ä½ äº†.
            å…¶å¯¦æˆ‘åªæ˜¯å¸Œæœ›ä½ ä¸è¦èªªã€Œä½ æœƒæ°¸é æ„›æˆ‘ã€, å› ç‚ºæœªä¾†çš„äº‹æƒ…èª°éƒ½èªªä¸æº–,
            ä½ ä¹Ÿæœ‰å¯èƒ½å“ªä¸€å¤©æ”¹è®Šå¿ƒæ„. è€Œæˆ‘å»æœƒä¸€ç›´è¨˜å¾—ä½ èªªéçš„æ¯ä¸€å¥è©±.
            ä½ åªè¦æ¯å¤©éƒ½ç”¨å¿ƒåœ°æ„›æˆ‘, å°±åƒæˆ‘æ¯å¤©éƒ½ç”¨å¿ƒåœ°æ„›ä½ ä¸€æ¨£, é‚£å°±å¤ äº†.
          </p>
          <p>
            æœ€å¾Œæˆ‘æƒ³èªªçš„æ˜¯, æˆ‘å¸Œæœ›æœ‰ä¸€å¤©æˆ‘å€‘èƒ½çœŸæ­£åœ°åœ¨ä¸€èµ·.
            æˆ‘æƒ³æ¯å¤©é†’ä¾†ç¬¬ä¸€å€‹çœ‹åˆ°çš„å°±æ˜¯ä½ , æƒ³è¦ªä½ , æŠ±ä½ ,
            æƒ³å’Œä½ ä¸€èµ·åšæ‰€æœ‰çš„äº‹æƒ…, é™ªä½ éæ¯ä¸€å€‹ç¯€æ—¥. å¦‚æœæˆ‘å€‘èƒ½ä¸€ç›´åœ¨ä¸€èµ·,
            æˆ‘æœƒéå¸¸å¹¸ç¦. æˆ‘ä¸çŸ¥é“ã€Œæ°¸é ã€æ˜¯ä¸æ˜¯çœŸçš„å­˜åœ¨,
            ä½†æˆ‘çŸ¥é“çš„æ˜¯â€”â€”æˆ‘çœŸå¿ƒå¸Œæœ›èƒ½ä¸€ç›´æ“æœ‰ä½ . æˆ‘æ„›ä½ 
          </p>
          <img class="tree" src="img/chiikawa-heart.png" alt="" />
        </div>
      </div>
    </div>

    <div class="result-container4 container">
      <div class="card-wrapper">
        <div class="card-flip-container">
          <div class="card-flip card-flip-left">
            <div class="card-front card-front-left">
              <div class="card-circle"></div>
            </div>
            <div class="card-back card-back-left">
              <img src="img/left.png" />
            </div>
          </div>
        </div>
        <div class="card-flip-container">
          <div class="card-flip card-flip-right">
            <div class="card-front card-front-right">
              <div class="card-circle"></div>
            </div>
            <div class="card-back card-back-right">
              <img src="img/right.PNG" />
            </div>
          </div>
        </div>
      </div>
      <div class="envelope-wrapper">
        <button class="open-letter-btn">å¯¶å¯¶é»é€™è£¡</button>
        <div class="envelope" aria-hidden="false">
          <div class="flap" aria-hidden="true"></div>
          <div class="letter">
            <p>
              æˆ‘æƒ³äº†ä¸€æ®µæ™‚é–“, åŸæœ¬æˆ‘æƒ³ 12 æœˆ 25 æ—¥å°±å», ä½†å› ç‚ºè«‹å‡æœ‰äº›èª¿æ•´,
              æˆ‘æƒ³çµ¦ä½ ä¸€å€‹é©šå–œçš„è¨ˆç•«æ²’è¾¦æ³•å¯¦ç¾.
            </p>
            <p>
              ä¸€é–‹å§‹æˆ‘å»å•ä¸»ç®¡è«‹å‡, ä»–èªªè¦å…ˆå•äººäº‹éƒ¨. äººäº‹éƒ¨èªªæœ‰äº›é™åˆ¶, åªèƒ½é¸
              12 æœˆ 27 æ—¥åˆ° 1 æœˆ 1 æ—¥, æˆ–è€… 12 æœˆ 31 æ—¥åˆ° 1 æœˆ 5
              æ—¥.ç•¶æ™‚æˆ‘æœ‰é»é›£é, å› ç‚ºé€™æ¨£åªèƒ½å¾…å…­å¤©, æˆ‘çœŸçš„å¥½æƒ³å¤šé™ªä½ .
            </p>
            <p>
              å¾Œä¾†æˆ‘åˆè·Ÿä¸»ç®¡å•†é‡, ä»–èªªæ²’å•é¡Œ, å¯ä»¥è®“æˆ‘è«‹å‡. æ‰€ä»¥æˆ‘å°±æ±ºå®š 12 æœˆ
              28 æ—¥åˆ° 1 æœˆ 4 æ—¥å»æ‰¾ä½ å•¦.
            </p>
            <p>å¥½æœŸå¾…è¦‹åˆ°ä½ ï¼æˆ‘æ„›ä½ å–” ğŸ’—</p>
          </div>
        </div>
      </div>
    </div>

    <div class="cssload-main">
      <div class="cssload-heart">
        <span class="cssload-heartL"></span>
        <span class="cssload-heartR"></span>
        <span class="cssload-square"></span>
      </div>
      <div class="cssload-shadow"></div>
    </div>
    <script src="js/button.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const resultContainers = document.querySelectorAll(
          ".result-container, .result-container2, .result-container3, .result-container4"
        );
        const heartLoader = document.querySelector(".cssload-main");

        const messages = [
          "å¯¶å¯¶, ä½ æº–å‚™å¥½è¦çœ‹çœ‹æˆ‘ç‚ºä½ æº–å‚™çš„å°ç¦®ç‰©äº†å—?",
          "æˆ‘æœ‰ä¸€å€‹å°é©šå–œè¦çµ¦ä½ å“¦ï½",
          "ä½ æƒ³ä¸æƒ³å…ˆçŒœçŒœçœ‹æ˜¯ä»€éº¼å‘¢?",
          "å¿«é», æˆ‘è¿«ä¸åŠå¾…æƒ³è®“ä½ çœ‹åˆ°å•¦ï¼",
          "å“ˆå“ˆ, ä½ ä¹Ÿæº–å‚™å¥½äº†å—?",
          "å¥½å•¦, å¯¶å¯¶, çœ‹é€™å€‹ï½",
        ];

        const videos = [
          "img/chiikawa1.mp4",
          "img/chiikawa2.mp4",
          "img/chiikawa3.mp4",
          "img/chiikawa4.mp4",
          "img/chiikawa5.mp4",
          "img/chiikawa6.mp4",
        ];

        const videoMessages = [
          "å“ˆå“ˆï½ æˆ‘æœ‰äº‹è¦è·Ÿä½ èªªï½å…ˆè³£å€‹é—œå­",
          "å‘µå‘µï½ å˜¿ï¼Œä½ çŒœçŒœæˆ‘åœ¨æƒ³ä»€éº¼",
          "å˜¿å˜¿ï½ ç­‰ä¸€ä¸‹ï¼Œæˆ‘å…ˆç•™å€‹å°ç§˜å¯†",
          "å“ˆå“ˆå“ˆï½æœ‰é©šå–œè¦å‘Šè¨´ä½ ï½å…ˆä¸èªª",
          "å˜»å˜»å˜»ï½ å˜˜ï½å…ˆè³£å€‹å°è¬é¡Œçµ¦ä½ ",
          "å—šå“ˆå“ˆï½ å¥½å•¦...å¥½å•¦!",
        ];

        let clickCount = 0;

        const videoWrapper = document.createElement("div");
        videoWrapper.style.width = "100%";
        videoWrapper.style.display = "flex";
        videoWrapper.style.justifyContent = "center";
        videoWrapper.style.alignItems = "center";
        videoWrapper.style.marginTop = "20px";
        videoWrapper.style.marginBottom = "20px";
        videoWrapper.style.opacity = "0";
        videoWrapper.style.transition = "opacity 0.3s";
        videoWrapper.style.position = "relative";

        const container3Video = document.createElement("video");
        container3Video.style.display = "none";
        container3Video.style.width = "500px";
        container3Video.style.height = "500px";
        container3Video.style.objectFit = "cover";
        container3Video.style.opacity = "0";
        container3Video.style.transition = "opacity 0.5s";
        container3Video.muted = true;
        container3Video.loop = true;

        const videoText = document.createElement("div");
        videoText.style.position = "absolute";
        videoText.style.color = "#000";
        videoText.style.fontSize = "24px";
        videoText.style.fontWeight = "bold";
        videoText.style.textAlign = "center";
        videoText.style.width = "100%";
        videoText.style.bottom = "500px";
        videoText.style.textShadow = "2px 2px 5px rgba(0,0,0,0.7)";
        videoText.style.opacity = "0";
        videoText.style.transition = "opacity 0.5s";

        videoWrapper.appendChild(container3Video);
        videoWrapper.appendChild(videoText);

        const container3 = resultContainers[2];
        container3.appendChild(videoWrapper);

        resultContainers.forEach((c) => (c.style.display = "none"));

        function showCustomAlert(message, callback) {
          let overlay = document.getElementById("customAlert");
          if (!overlay) {
            overlay = document.createElement("div");
            overlay.id = "customAlert";
            overlay.style.position = "fixed";
            overlay.style.top = "0";
            overlay.style.left = "0";
            overlay.style.width = "100%";
            overlay.style.height = "100%";
            overlay.style.background = "rgba(0,0,0,0.45)";
            overlay.style.display = "flex";
            overlay.style.justifyContent = "center";
            overlay.style.alignItems = "center";
            overlay.style.zIndex = "9999";

            const box = document.createElement("div");
            box.style.background = "#fff";
            box.style.padding = "30px 25px";
            box.style.borderRadius = "15px";
            box.style.width = "330px";
            box.style.textAlign = "center";
            box.style.boxShadow = "0 0 20px rgba(0,0,0,0.25)";
            box.style.animation = "fadeIn 0.3s ease";
            overlay.appendChild(box);

            const text = document.createElement("div");
            text.id = "customAlertText";
            text.style.fontSize = "18px";
            text.style.color = "#333";
            text.style.marginBottom = "18px";
            box.appendChild(text);

            const btn = document.createElement("button");
            btn.id = "customAlertBtn";
            btn.textContent = "OK";
            btn.style.background = "#ff8aa6";
            btn.style.border = "none";
            btn.style.padding = "10px 25px";
            btn.style.fontSize = "16px";
            btn.style.color = "#fff";
            btn.style.borderRadius = "10px";
            btn.style.cursor = "pointer";
            btn.onmouseover = () => (btn.style.opacity = "0.9");
            btn.onmouseout = () => (btn.style.opacity = "1");
            box.appendChild(btn);

            document.body.appendChild(overlay);
          }

          document.getElementById("customAlertText").textContent = message;
          overlay.style.display = "flex";

          document.getElementById("customAlertBtn").onclick = () => {
            overlay.style.display = "none";
            if (callback) callback();
          };
        }

        resultContainers.forEach((container, index) => {
          if (index < resultContainers.length - 1) {
            let btnContainer = container.querySelector(".button-container");
            if (!btnContainer) {
              btnContainer = document.createElement("div");
              btnContainer.classList.add("button-container");
              container.appendChild(btnContainer);
            }

            const nextBtn = document.createElement("button");
            nextBtn.textContent = "ä¸‹ä¸€å€‹";
            nextBtn.classList.add("btn", "next-btn");
            btnContainer.appendChild(nextBtn);

            nextBtn.addEventListener("click", () => {
              if (container.classList.contains("result-container3")) {
                if (clickCount < messages.length) {
                  Array.from(container.children).forEach((child) => {
                    child.style.transition = "opacity 0.3s";
                    child.style.opacity = "0";
                  });

                  setTimeout(() => {
                    Array.from(container.children).forEach(
                      (child) => (child.style.display = "none")
                    );
                    heartLoader.style.display = "inherit";

                    setTimeout(() => {
                      heartLoader.style.display = "none";

                      showCustomAlert(messages[clickCount], () => {
                        container3.style.display = "block";
                        videoWrapper.style.display = "flex";
                        container3Video.src = videos[clickCount];
                        container3Video.style.display = "block";
                        container3Video.play();

                        videoText.textContent = videoMessages[clickCount];
                        videoText.style.opacity = "1";

                        setTimeout(() => {
                          videoWrapper.style.opacity = "1";
                          container3Video.style.opacity = "1";
                        }, 30);

                        btnContainer.style.opacity = "0";
                        btnContainer.style.display = "block";
                        setTimeout(() => {
                          btnContainer.style.transition = "opacity 0.5s";
                          btnContainer.style.opacity = "1";
                        }, 3000);

                        clickCount++;
                      });
                    }, 500);
                  }, 300);
                } else {
                  container.style.display = "none";
                  container3Video.style.display = "none";
                  heartLoader.style.display = "inherit";

                  setTimeout(() => {
                    heartLoader.style.display = "none";
                    const nextContainer = resultContainers[index + 1];
                    nextContainer.style.display = "block";
                    const gifResult =
                      nextContainer.querySelector(".gif-result");
                    if (gifResult) gifResult.play();
                  }, 5000);
                }
              } else {
                container.style.display = "none";
                heartLoader.style.display = "inherit";

                setTimeout(() => {
                  heartLoader.style.display = "none";
                  const nextContainer = resultContainers[index + 1];
                  nextContainer.style.display = "block";

                  const gifResult = nextContainer.querySelector(".gif-result");
                  if (gifResult) gifResult.play();
                }, 3000);
              }
            });
          }
        });
      });

      const style = document.createElement("style");
      style.innerHTML = `
@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}`;
      document.head.appendChild(style);
    </script>

    <script>
      const btn = document.querySelector(".open-letter-btn");
      const env = document.querySelector(".envelope");

      if (btn && env) {
        // à¹€à¸›à¸´à¸”à¸‹à¸­à¸‡à¸•à¸­à¸™à¸„à¸¥à¸´à¸
        btn.addEventListener("click", function () {
          env.classList.add("open");
        });

        // à¸›à¸´à¸”à¸‹à¸­à¸‡à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸­à¸²à¹€à¸¡à¸²à¸ªà¹Œà¸­à¸­à¸à¸ˆà¸²à¸à¸›à¸¸à¹ˆà¸¡
        btn.addEventListener("mouseleave", function () {
          env.classList.remove("open");
        });
      }
    </script>
    <script>
      const lastDate = new Date(2025, 10, 17, 0, 0, 0);

      function updateTime() {
        const now = new Date();
        let diffMs = now - lastDate;

        if (diffMs < 0) {
          document.getElementById("time").textContent = "Not yet started";
          return;
        }

        let totalSeconds = Math.floor(diffMs / 1000);

        const days = Math.floor(totalSeconds / (24 * 3600));
        totalSeconds %= 24 * 3600;

        const hours = Math.floor(totalSeconds / 3600);
        totalSeconds %= 3600;

        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;

        document.getElementById("time").innerHTML =
          `<span class="num days">${days}</span><span class="label">å¤©</span> ` +
          `<span class="num hours">${hours}</span><span class="label">å°æ™‚</span> ` +
          `<span class="num minutes">${minutes}</span><span class="label">åˆ†é˜</span> ` +
          `<span class="num seconds">${seconds}</span><span class="label">ç§’é˜</span>`;
      }

      updateTime(); // à¹€à¸£à¸µà¸¢à¸à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸
      setInterval(updateTime, 1000); // à¸­à¸±à¸›à¹€à¸”à¸•à¸—à¸¸à¸à¸§à¸´à¸™à¸²à¸—à¸µ
    </script>

    <script>
      let timer = null;
      let hideTimeout = null;

      const toggleBtn = document.getElementById("toggleBtn");
      const configBox = document.getElementById("configBox");

      // à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸„à¸²à¸—à¹Œà¸”à¸²à¸§à¸™à¹Œ
      function startCountdown(savedDate) {
        if (timer) clearInterval(timer);

        timer = setInterval(() => {
          const now = new Date().getTime();
          const target = new Date(savedDate).getTime();
          const diff = target - now;

          if (diff <= 0) {
            document.getElementById("countdownText").textContent = "è©²åˆ°äº†ï¼âœ¨";
            clearInterval(timer);
            return;
          }

          const days = Math.floor(diff / (1000 * 60 * 60 * 24));
          const hours = Math.floor(
            (diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
          );
          const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

          document.getElementById("countdownText").innerHTML =
            `<span class="date days">${days}</span><span class="label">å¤©</span> ` +
            `<span class="date hours">${hours}</span><span class="label">å°æ™‚</span> ` +
            `<span class="date minutes">${minutes}</span><span class="label">åˆ†é˜</span>`;
        }, 1000);
      }

      // à¹€à¸›à¸´à¸”à¸à¸¥à¹ˆà¸­à¸‡
      function showConfig() {
        if (hideTimeout) clearTimeout(hideTimeout);
        configBox.style.display = "block";
      }

      // à¸‹à¹ˆà¸­à¸™à¸à¸¥à¹ˆà¸­à¸‡à¸–à¹‰à¸²à¹€à¸¡à¸²à¸ªà¹Œà¹„à¸¡à¹ˆà¸­à¸¢à¸¹à¹ˆà¸šà¸™à¸›à¸¸à¹ˆà¸¡à¸«à¸£à¸·à¸­à¸à¸¥à¹ˆà¸­à¸‡
      function scheduleHideConfig() {
        hideTimeout = setTimeout(() => {
          const isHoveringBtn = toggleBtn.matches(":hover");
          const isHoveringBox = configBox.matches(":hover");

          if (!isHoveringBtn && !isHoveringBox) {
            configBox.style.display = "none";
          }
        }, 100); // à¸«à¸™à¹ˆà¸§à¸‡ 100ms à¹ƒà¸«à¹‰à¹€à¸¥à¸·à¹ˆà¸­à¸™à¹€à¸¡à¸²à¸ªà¹Œà¸ˆà¸²à¸à¸›à¸¸à¹ˆà¸¡à¹„à¸›à¸à¸¥à¹ˆà¸­à¸‡à¹„à¸”à¹‰
      }

      // à¸›à¸¸à¹ˆà¸¡à¹€à¸›à¸´à¸”à¸à¸¥à¹ˆà¸­à¸‡
      toggleBtn.addEventListener("click", showConfig);

      // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š hover à¹€à¸¡à¸²à¸ªà¹Œà¸­à¸­à¸
      toggleBtn.addEventListener("mouseleave", scheduleHideConfig);
      configBox.addEventListener("mouseleave", scheduleHideConfig);

      // à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²
      document.getElementById("setBtn").addEventListener("click", () => {
        const selected = document.getElementById("datePicker").value;
        const title = document.getElementById("titleInput").value.trim();

        if (!selected) {
          alert("è«‹é¸æ“‡æ—¥æœŸ ğŸ“…");
          return;
        }

        if (!title) {
          alert("è«‹è¼¸å…¥å€’æ•¸è¨ˆæ™‚åç¨± â³ğŸ“");
          return;
        }

        localStorage.setItem("countdown_date", selected);
        localStorage.setItem("countdown_title", title);

        document.getElementById("titleDisplay").textContent = title;
        startCountdown(selected);

        configBox.style.display = "none";
      });

      // à¸£à¸µà¹€à¸‹à¹‡à¸•à¸„à¹ˆà¸²
      document.getElementById("resetBtn").addEventListener("click", () => {
        if (timer) clearInterval(timer);

        localStorage.removeItem("countdown_date");
        localStorage.removeItem("countdown_title");

        document.getElementById("titleDisplay").textContent =
          "å€’æ•¸è¨ˆæ™‚åç¨± â³âœ¨";
        document.getElementById("countdownText").textContent = "--:--:--";
        document.getElementById("titleInput").value = "";
        document.getElementById("datePicker").value = "";
      });

      // à¹‚à¸«à¸¥à¸”à¸„à¹ˆà¸²à¹€à¸”à¸´à¸¡à¸ˆà¸²à¸ localStorage
      window.onload = () => {
        const savedDate = localStorage.getItem("countdown_date");
        const savedTitle = localStorage.getItem("countdown_title");

        if (savedTitle) {
          document.getElementById("titleDisplay").textContent = savedTitle;
          document.getElementById("titleInput").value = savedTitle;
        }

        if (savedDate) {
          document.getElementById("datePicker").value = savedDate;
          startCountdown(savedDate);
        }
      };
    </script>
  </body>
</html>
